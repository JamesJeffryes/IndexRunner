language: python

sudo: required

services:
  - docker
  - elasticsearch

branches:
  only:
    - master

env:

before_install:
  - docker version
  - curl -O https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/deb/elasticsearch/5.6.11/elasticsearch-5.6.11.deb && sudo dpkg -i --force-confnew elasticsearch-5.6.11.deb && sudo service elasticsearch restart

before_script:
  - sleep 10

install:
  - export PATH=$(pwd)/bin:$PATH
  - source src/sh/sdk-completion.sh

script:
  - make test

after_script:
